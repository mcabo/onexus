<?xml version="1.0" encoding="UTF-8"?>
<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
        >

    <!-- PageManager -->
    <reference-list id="pageCreatorsRef" interface="org.onexus.website.api.pages.IPageCreator" availability="optional">
        <reference-listener bind-method="bindCreators" unbind-method="unbindCreators" ref="pageManager"/>
    </reference-list>
    <service interface="org.onexus.website.api.pages.IPageManager" ref="pageManager"/>
    <bean id="pageManager"
          class="org.onexus.website.api.pages.DefaultPageManager">
        <property name="resourceRegister" ref="resourceRegister"/>
        <property name="creators" ref="pageCreatorsRef"/>
    </bean>

    <!-- Pages -->
    <service interface="org.onexus.website.api.pages.IPageCreator" ref="browserPage"/>
    <bean id="browserPage" class="org.onexus.website.api.pages.browser.BrowserPageCreator">
        <property name="resourceRegister" ref="resourceRegister"/>
    </bean>

    <service interface="org.onexus.website.api.pages.IPageCreator" ref="htmlPage"/>
    <bean id="htmlPage" class="org.onexus.website.api.pages.html.HtmlPageCreator">
        <property name="resourceRegister" ref="resourceRegister"/>
    </bean>

    <service interface="org.onexus.website.api.pages.IPageCreator" ref="searchPage"/>
    <bean id="searchPage" class="org.onexus.website.api.pages.search.SearchPageCreator">
        <property name="resourceRegister" ref="resourceRegister"/>
    </bean>

    <service interface="org.onexus.website.api.pages.IPageCreator" ref="downloadsPage"/>
    <bean id="downloadsPage" class="org.onexus.website.api.pages.downloads.DownloadsPageCreator">
        <property name="resourceRegister" ref="resourceRegister"/>
    </bean>

</blueprint>